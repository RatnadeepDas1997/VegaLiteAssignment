<!doctype html>
<html>
  <head>
    <title>Vega-Lite Bar Chart</title>
    <meta charset="utf-8" />

    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>

    <style media="screen">
      /* Add space between Vega-Embed links  */
      .vega-actions a {
        margin-right: 5px;
      }
	  /* Center-align the visualizations */
      #vis {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <h1 style="text-align: center;">Assignment 2: Visualizing Tables using Vega-Lite</h1>
    <!-- Container for the visualization -->
    <div id="vis"></div>

    <script>
      // Assign the specification to a local variable vlSpec.
      var vlSpec = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "values": [
  {
    "OrderDate": "06-01-2021",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Pencil",
    "Units": 95,
    "Unit Cost": 1.99,
    "Total": 189.05
  },
  {
    "OrderDate": "23-01-2021",
    "Region": "Central",
    "Rep": "Kivell",
    "Item": "Binder",
    "Units": 50,
    "Unit Cost": 19.99,
    "Total": 999.5
  },
  {
    "OrderDate": "09-02-2021",
    "Region": "Central",
    "Rep": "Jardine",
    "Item": "Pencil",
    "Units": 36,
    "Unit Cost": 4.99,
    "Total": 179.64
  },
  {
    "OrderDate": "26-02-2021",
    "Region": "Central",
    "Rep": "Gill",
    "Item": "Pen",
    "Units": 27,
    "Unit Cost": 19.99,
    "Total": 539.73
  },
  {
    "OrderDate": "15-03-2021",
    "Region": "West",
    "Rep": "Sorvino",
    "Item": "Pencil",
    "Units": 56,
    "Unit Cost": 2.99,
    "Total": 167.44
  },
  {
    "OrderDate": "01-04-2021",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Binder",
    "Units": 60,
    "Unit Cost": 4.99,
    "Total": 299.4
  },
  {
    "OrderDate": "18-04-2021",
    "Region": "Central",
    "Rep": "Andrews",
    "Item": "Pencil",
    "Units": 75,
    "Unit Cost": 1.99,
    "Total": 149.25
  },
  {
    "OrderDate": "05-05-2021",
    "Region": "Central",
    "Rep": "Jardine",
    "Item": "Pencil",
    "Units": 90,
    "Unit Cost": 4.99,
    "Total": 449.1
  },
  {
    "OrderDate": "22-05-2021",
    "Region": "West",
    "Rep": "Thompson",
    "Item": "Pencil",
    "Units": 32,
    "Unit Cost": 1.99,
    "Total": 63.68
  },
  {
    "OrderDate": "08-06-2021",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Binder",
    "Units": 60,
    "Unit Cost": 8.99,
    "Total": 539.4
  },
  {
    "OrderDate": "25-06-2021",
    "Region": "Central",
    "Rep": "Morgan",
    "Item": "Pencil",
    "Units": 90,
    "Unit Cost": 4.99,
    "Total": 449.1
  },
  {
    "OrderDate": "12-07-2021",
    "Region": "East",
    "Rep": "Howard",
    "Item": "Binder",
    "Units": 29,
    "Unit Cost": 1.99,
    "Total": 57.71
  },
  {
    "OrderDate": "29-07-2021",
    "Region": "East",
    "Rep": "Parent",
    "Item": "Binder",
    "Units": 81,
    "Unit Cost": 19.99,
    "Total": 1619.19
  },
  {
    "OrderDate": "15-08-2021",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Pencil",
    "Units": 35,
    "Unit Cost": 4.99,
    "Total": 174.65
  },
  {
    "OrderDate": "01-09-2021",
    "Region": "Central",
    "Rep": "Smith",
    "Item": "Desk",
    "Units": 2,
    "Unit Cost": 125,
    "Total": 250
  },
  {
    "OrderDate": "18-09-2021",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Pen Set",
    "Units": 16,
    "Unit Cost": 15.99,
    "Total": 255.84
  },
  {
    "OrderDate": "05-10-2021",
    "Region": "Central",
    "Rep": "Morgan",
    "Item": "Binder",
    "Units": 28,
    "Unit Cost": 8.99,
    "Total": 251.72
  },
  {
    "OrderDate": "22-10-2021",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Pen",
    "Units": 64,
    "Unit Cost": 8.99,
    "Total": 575.36
  },
  {
    "OrderDate": "08-11-2021",
    "Region": "East",
    "Rep": "Parent",
    "Item": "Pen",
    "Units": 15,
    "Unit Cost": 19.99,
    "Total": 299.85
  },
  {
    "OrderDate": "25-11-2021",
    "Region": "Central",
    "Rep": "Kivell",
    "Item": "Pen Set",
    "Units": 96,
    "Unit Cost": 4.99,
    "Total": 479.04
  },
  {
    "OrderDate": "12-12-2021",
    "Region": "Central",
    "Rep": "Smith",
    "Item": "Pencil",
    "Units": 67,
    "Unit Cost": 1.29,
    "Total": 86.43
  },
  {
    "OrderDate": "29-12-2021",
    "Region": "East",
    "Rep": "Parent",
    "Item": "Pen Set",
    "Units": 74,
    "Unit Cost": 15.99,
    "Total": 1183.26
  },
  {
    "OrderDate": "15-01-2022",
    "Region": "Central",
    "Rep": "Gill",
    "Item": "Binder",
    "Units": 46,
    "Unit Cost": 8.99,
    "Total": 413.54
  },
  {
    "OrderDate": "01-02-2022",
    "Region": "Central",
    "Rep": "Smith",
    "Item": "Binder",
    "Units": 87,
    "Unit Cost": 15,
    "Total": 1305
  },
  {
    "OrderDate": "18-02-2022",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Binder",
    "Units": 4,
    "Unit Cost": 4.99,
    "Total": 19.96
  },
  {
    "OrderDate": "07-03-2022",
    "Region": "West",
    "Rep": "Sorvino",
    "Item": "Binder",
    "Units": 7,
    "Unit Cost": 19.99,
    "Total": 139.93
  },
  {
    "OrderDate": "24-03-2022",
    "Region": "Central",
    "Rep": "Jardine",
    "Item": "Pen Set",
    "Units": 50,
    "Unit Cost": 4.99,
    "Total": 249.5
  },
  {
    "OrderDate": "10-04-2022",
    "Region": "Central",
    "Rep": "Andrews",
    "Item": "Pencil",
    "Units": 66,
    "Unit Cost": 1.99,
    "Total": 131.34
  },
  {
    "OrderDate": "27-04-2022",
    "Region": "East",
    "Rep": "Howard",
    "Item": "Pen",
    "Units": 96,
    "Unit Cost": 4.99,
    "Total": 479.04
  },
  {
    "OrderDate": "14-05-2022",
    "Region": "Central",
    "Rep": "Gill",
    "Item": "Pencil",
    "Units": 53,
    "Unit Cost": 1.29,
    "Total": 68.37
  },
  {
    "OrderDate": "31-05-2022",
    "Region": "Central",
    "Rep": "Gill",
    "Item": "Binder",
    "Units": 80,
    "Unit Cost": 8.99,
    "Total": 719.2
  },
  {
    "OrderDate": "17-06-2022",
    "Region": "Central",
    "Rep": "Kivell",
    "Item": "Desk",
    "Units": 5,
    "Unit Cost": 125,
    "Total": 625
  },
  {
    "OrderDate": "04-07-2022",
    "Region": "East",
    "Rep": "Jones",
    "Item": "Pen Set",
    "Units": 62,
    "Unit Cost": 4.99,
    "Total": 309.38
  },
  {
    "OrderDate": "21-07-2022",
    "Region": "Central",
    "Rep": "Morgan",
    "Item": "Pen Set",
    "Units": 55,
    "Unit Cost": 12.49,
    "Total": 686.95
  },
  {
    "OrderDate": "07-08-2022",
    "Region": "Central",
    "Rep": "Kivell",
    "Item": "Pen Set",
    "Units": 42,
    "Unit Cost": 23.95,
    "Total": 1005.9
  },
  {
    "OrderDate": "24-08-2022",
    "Region": "West",
    "Rep": "Sorvino",
    "Item": "Desk",
    "Units": 3,
    "Unit Cost": 275,
    "Total": 825
  },
  {
    "OrderDate": "10-09-2022",
    "Region": "Central",
    "Rep": "Gill",
    "Item": "Pencil",
    "Units": 7,
    "Unit Cost": 1.29,
    "Total": 9.03
  },
  {
    "OrderDate": "27-09-2022",
    "Region": "West",
    "Rep": "Sorvino",
    "Item": "Pen",
    "Units": 76,
    "Unit Cost": 1.99,
    "Total": 151.24
  },
  {
    "OrderDate": "14-10-2022",
    "Region": "West",
    "Rep": "Thompson",
    "Item": "Binder",
    "Units": 57,
    "Unit Cost": 19.99,
    "Total": 1139.43
  },
  {
    "OrderDate": "31-10-2022",
    "Region": "Central",
    "Rep": "Andrews",
    "Item": "Pencil",
    "Units": 14,
    "Unit Cost": 1.29,
    "Total": 18.06
  },
  {
    "OrderDate": "17-11-2022",
    "Region": "Central",
    "Rep": "Jardine",
    "Item": "Binder",
    "Units": 11,
    "Unit Cost": 4.99,
    "Total": 54.89
  },
  {
    "OrderDate": "04-12-2022",
    "Region": "Central",
    "Rep": "Jardine",
    "Item": "Binder",
    "Units": 94,
    "Unit Cost": 19.99,
    "Total": 1879.06
  },
  {
    "OrderDate": "21-12-2022",
    "Region": "Central",
    "Rep": "Andrews",
    "Item": "Binder",
    "Units": 28,
    "Unit Cost": 4.99,
    "Total": 139.72
  }
]
  },
"vconcat":[
{
  "hconcat": 
  [
    {
      "mark": {"type":"bar","tooltip":true},
      "encoding": {
            "x": {
                  "field": "Rep", 
                  "type": "ordinal",
                  "sort":"-y"
                  },
            "y": {
                  "field": "Total", 
                  "type": "quantitative",
                  "aggregate": "sum",
                  "title": "Total"
                  }
                }
    },
    {
      "encoding": {
                    "theta": {"field": "Units", "type": "ordinal", "stack": "normalize","aggregate":"sum"},
                    "color": {"field": "Item", "type": "nominal"}
                  },
      "layer": [{
                  "mark": {"type": "arc", "outerRadius": 80,"tooltip":true}
                }, 
                {
                  "mark": {"type": "text", "radius": 100},
                  "encoding": {
                                "text": {"field": "Item", "type": "nominal"}
                              }
                }]
    }
  ]
},
{
  "hconcat": 
  [
    {
      "mark": {"type":"point","tooltip":true},
      "encoding": {
                "x": {"field": "Units", "type": "quantitative", "title": "Units"},
                "y": {"field": "Unit Cost", "type": "quantitative", "title": "Unit Cost"},
                "color": {"field": "Item", "type": "nominal", "title": "Item"}
              },
    
  
    },
    {"layer": [{
    "mark": {"type": "bar","tooltip":true},
    "encoding": {
      "x": {
        "bin": true,
        "field": "Units",
        "type": "quantitative"
      },
      "y": {
        "aggregate": "count",
        "type": "quantitative"
      }
    }
  },{
    "mark": {"type":"rule","tooltip":true},
    "encoding": {
      "x": {
        "aggregate": "mean",
        "field": "Units",
        "type": "quantitative"
      },
      "color": {"value": "red"},
      "size": {"value": 10}
    }
  }]}    
  ]
},
{
"hconcat": [
  {
    
      "mark": {"type":"line","tooltip":true},
      "encoding": {
                    "x": {
      "field": "OrderDate",
      "type": "ordinal",
      "title": "Order Date",
      "sort": {
        "op": "distinct",
        "field": "OrderDate.t"
      }
    },
    "y": {"field": "Total", "type": "quantitative", "title": "Total"}
                  }
    
  }
]}]
};

      // Embed the visualization in the container with id `vis`
      vegaEmbed('#vis', vlSpec);
    </script>
  </body>
</html>